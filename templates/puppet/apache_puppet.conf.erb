
PassengerHighPerformance on
PassengerMaxPoolSize 12
PassengerPoolIdleTime 1500
PassengerMaxRequests 1000
PassengerStatThrottleRate 120
RackAutoDetect Off
RailsAutoDetect Off

Listen <%= ip_addr %>:8140
NameVirtualHost <%= ip_addr %>:8140

<VirtualHost <%= ip_addr %>:8140>
	ErrorLog ${APACHE_LOG_DIR}/puppet_error.log
        CustomLog ${APACHE_LOG_DIR}/puppet_access.log combined

        SSLEngine on

        SSLCertificateFile      /var/lib/puppet/ssl/certs/<%= cert_host %>.pem
        SSLCertificateKeyFile   /var/lib/puppet/ssl/private_keys/<%= cert_host %>.pem
        SSLCertificateChainFile /var/lib/puppet/ssl/ca/ca_crt.pem
        SSLCACertificateFile    /var/lib/puppet/ssl/ca/ca_crt.pem
        SSLCARevocationFile     /var/lib/puppet/ssl/ca/ca_crl.pem
        SSLVerifyClient optional
        SSLVerifyDepth  1
        SSLOptions +StdEnvVars

        DocumentRoot /etc/puppet/rack/public/
        RackBaseURI /
        <Directory /etc/puppet/rack/>
                Options None
                AllowOverride None
                Order allow,deny
                allow from all
        </Directory>
</VirtualHost>

